parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"j1OZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=o;var e=d(require("@babel/runtime/helpers/slicedToArray")),t=l(require("react")),r=require("../../lib"),n=d(require("../../layouts/default")),a=require("antd"),u=d(require("moment"));function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}return t.default=e,t}function d(e){return e&&e.__esModule?e:{default:e}}require("moment/locale/zh-cn"),u.default.locale("zh-cn");var i="http://wdlj.zoomdong.xin/";function o(l){var d=(0,t.useState)(!1),o=(0,e.default)(d,2),c=(o[0],o[1],(0,t.useState)([])),f=(0,e.default)(c,2),m=f[0],s=f[1],y=[{title:"海报",dataIndex:"posterKey",key:"posterKey",render:function(e,r){return t.default.createElement("img",{width:"160",src:i+r.posterKey})}},{title:"名字",dataIndex:"title",key:"title"},{title:"原始名",dataIndex:"rawTitle",key:"rawTitle"},{title:"上映时间",dataIndex:"pubdate",key:"pubdate",render:function(e,r){return r.pubdate.map(function(e,r){return t.default.createElement("p",{key:r},(0,u.default)(e.date).format("YYYY-MM-DD")," ",e.country)})}},{title:"评分",dataIndex:"rate",key:"rate"},{title:"更新时间",dataIndex:"meta",key:"meta",render:function(e,r){return t.default.createElement("span",null,(0,u.default)(r.meta.createdAt).fromNow(!0)," 前")}},{title:"豆瓣 ID",dataIndex:"doubanId",key:"doubanId"},{title:"类型",dataIndex:"movieTypes",key:"movieTypes",render:function(e,r){return r.movieTypes.map(function(e,r){return t.default.createElement("p",{key:r},e)})}},{title:"标签",dataIndex:"tags",key:"tags",render:function(e,r){return r.tags.map(function(e,r){return t.default.createElement("p",{key:r},e)})}},{title:"简要",key:"summary",render:function(e,r){return t.default.createElement("p",{style:{padding:"5px",maxWidth:"800px"}},r.summary)}},{title:"详情",key:"_id",render:function(e,r){return t.default.createElement("a",{href:"/detail/".concat(r._id),target:"_blank"},"详情")}},{title:"操作",key:"action",render:function(e,r){return t.default.createElement(a.Button,{type:"danger",onClick:function(){return p(r._id)}},"删除")}}],p=function(e){(0,r.request)({method:"delete",url:"/admin/movies?id=".concat(e)}).then(function(e){var t=JSON.parse(JSON.stringify(e));0===t.length||t.map(function(e,t){return e.key=t,e}),s(t)}).catch(function(){s([])})};return(0,t.useEffect)(function(){(0,r.request)({method:"get",url:"/admin/movie/list"}).then(function(e){!e||0===e.length||e.map(function(e,t){return e.key=t,e}),s(e)}).catch(function(){s([])})},[]),t.default.createElement(n.default,l,t.default.createElement("div",{className:"flex-row full"},t.default.createElement("div",{className:"flex-1 scroll-y align-self-start"},t.default.createElement(a.Table,{dataSource:m,columns:y}))))}
},{"@babel/runtime/helpers/slicedToArray":"69HE","react":"1n8/","../../lib":"bRhr","../../layouts/default":"DOXU","antd":"1cmS","moment":"a2/B","moment/locale/zh-cn":"10bh"}]},{},[], null)
//# sourceMappingURL=/dist/list.e61f1d12.js.map